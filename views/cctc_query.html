<!DOCTYPE html>
<html lang="en">
<head>
	{{ template "header"}}
</head>


<body class="page-body  page-fade" >

<div class="page-container"><!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->
	
	{{ template "navigator"}}
	<div class="main-content" style="overflow:scroll; height:250px;text-overflow: ellipsis;white-space: nowrap;">
		<div class="panel panel-primary" data-collapsed="0" style="border: none;">
			<div class="panel-heading" >
				<br/>
				<form role="form" class="form-horizontal form-groups-bordered">
					<div class="form-group">
						<label class="col-sm-1 control-label">消息类型</label>			
						<div class="col-sm-3">
							<select class="form-control">
								<option>ALL</option>
							</select>
						
						
						</div>
						<label class="col-sm-1 control-label">进程标识</label>			
						<div class="col-sm-3">
							<select class="form-control">
								<option>ALL</option>
							</select>									
						</div>
						<div class="col-sm-2">
							<button type="button" class="btn btn-default" id="queryBtn">查询</button>
						</div>
					</div>
				</form>
				<br/>
			</div>					
			<table class="table table-bordered datatable"  >
				<thead>
					<tr>
						<th>MsgType</th>
						<th>ProcessId</th>
						<th>SysId</th>
						<th>Pattern</th>
						<th>Channel</th>
						<th>IsSend32KB</th>
						<th>IsSendIPinIP</th>
						<th>IsSaveFile</th>
						<th>IsArchive</th>
						<th>ResendShmHead</th>
						<th>ResendShmTear</th>
						<th>ResendWriteShmLoop</th>
						<th>ResendReadShmLoop</th>
						<th>ResendWriteShmSpeed</th>
						<th>ResendReadShmSpeed</th>
						<th>SaveShmHead</th>
						<th>SaveShmTear</th>
						<th>SaveWriteShmLoop</th>
						<th>SaveReadShmLoop</th>
						<th>SaveWriteShmSpeed</th>
						<th>SaveReadShmSpeed</th>
						<th>RecvBeats</th>
						<th>ResendBeats</th>
						<th>SaveBeats</th>
						<th>RecvBytes</th>
						<th>Send32KFrames</th>
						<th>SendIPinIPFrames</th>
						<th>SendSmallCraftFrames</th>
						<th>TimeStamp</th>
					</tr>
				</thead>
				<tbody id="cctc_tb">
			
				</tbody>
			</table>			
		</div>

	</div>
	<script>
		jQuery(document).ready(function(){
			jQuery("#queryBtn").click(function(){
				let param={"msgType": "CTCCFRONTEND_CONTROL", "Operation": "Open",
                "SysId": 1, "Pattern": 1, 
                "Channel": 1,"BeginTime":"202002291020","EndTime":"202002291020","MainHostName":"","BackupHostName":""};    
				jQuery.ajax({
                type: 'POST',  
                data: JSON.stringify(param),
                dataType:"JSON",
                contentType:"application/json",
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                url : "/cctc/query_db",
                success: function(data) {
                    updateCCTCTable(data)
                },
                complete: function( xhr,data ){
				}
			});
            });
		});
		function updateCCTCTable(data){
			var obj = eval("("+data+")");
            var trStr = '';//动态拼接table
            trStr += '<tr>';//拼接处规范的表格形式
            trStr += '<td>'+ obj.msgType+'</td>';
            trStr += '<td>'+ obj.processId+'</td>';
            trStr += '<td>'+ obj.sysId+'</td>';
            trStr += '<td>'+ obj.pattern+'</td>';
            trStr += '<td>'+ obj.channel+'</td>';
            trStr += '<td>'+ obj.isSend32KB+'</td>';
            trStr += '<td>'+ obj.isSendIPinIP+'</td>';
            trStr += '<td>'+ obj.isSaveFile+'</td>';
            trStr += '<td>'+ obj.isArchive+'</td>';
            trStr += '<td>'+ obj.resendShmHead+'</td>';
            trStr += '<td>'+ obj.resendShmTear+'</td>';
            trStr += '<td>'+ obj.resendWriteShmLoop+'</td>';
            trStr += '<td>'+ obj.resendReadShmLoop+'</td>';
			trStr += '<td>'+ obj.resendWriteShmSpeed+'</td>';
            trStr += '<td>'+ obj.resendReadShmSpeed+'</td>';
            trStr += '<td>'+ obj.saveShmHead+'</td>';
            trStr += '<td>'+ obj.saveShmTear+'</td>';
            trStr += '<td>'+ obj.saveWriteShmLoop+'</td>';
            trStr += '<td>'+ obj.saveReadShmLoop+'</td>';
			trStr += '<td>'+ obj.saveWriteShmSpeed+'</td>';
            trStr += '<td>'+ obj.saveReadShmSpeed+'</td>';
            trStr += '<td>'+ obj.recvBeats+'</td>';
            trStr += '<td>'+ obj.resendBeats+'</td>';
			trStr += '<td>'+ obj.saveBeats+'</td>';
            trStr += '<td>'+ obj.recvBytes+'</td>';
            trStr += '<td>'+ obj.send32KFrames+'</td>';
            trStr += '<td>'+ obj.sendIPinIPFrames+'</td>';
            trStr += '<td>'+ obj.sendSmallCraftFrames+'</td>';
            trStr += '<td>'+ obj.timeStamp+'</td> ';
			trStr+='</tr>';
			jQuery('#cctc_tb').html(trStr);
	  }
	</script>

</body>
</html>